services:
  minio:
    image: minio/minio:RELEASE.2025-09-07T16-13-09Z-cpuv1
    container_name: minio
    ports:
      - "9007:9000"
      - "9008:9001"
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin
    command: server /data --console-address ":9001"
    volumes:
      - ./minio_data:/data
    restart: always

  feathr-registry-ui:
    image: feathr-ui-and-registry-v1:latest
    container_name: feathr-ui-and-registry
    environment:
      GRANT_SUDO: yes
      REACT_APP_ENABLE_RBAC: "false"
      API_BASE: "api/v1"
      FEATHR_SANDBOX: "1"
      # CONNECTION_STR: "Server=tcp:analytics-postgres,5432;Initial Catalog=analytics;Persist Security Info=False;User ID=postgres;Password=postgres;Encrypt=False;TrustServerCertificate=True;Connection Timeout=30;"
      # pymssql._pymssql.OperationalError: (20009, b'DB-Lib error message 20009, severity 9:\nUnable to connect: Adaptive Server is unavailable or does not exist (analytics-postgres)\nNet-Lib error during Connection refused (111)\nDB-Lib error message 20009, severity 9:\nUnable to connect: Adaptive Server is unavailable or does not exist (analytics-postgres)\nNet-Lib error during Connection refused (111)\n')
    restart: always

    ports:
      - "8081:80"
      - "7080:7080"
      - "8000:8000"
